# 爬虫失败任务处理模块
[![Build status](http://47.104.67.236:9109/badge/nodejs_spider_faith/build.svg)](http://47.104.67.236:9109/badge/nodejs_spider_faith/build.svg)
[![version](http://47.104.67.236:9109/badge/nodejs_spider_faith/version.svg)](http://47.104.67.236:9109/badge/nodejs_spider_faith/version.svg)
[![coverage](http://47.104.67.236:9109/badge/nodejs_spider_faith/coverage.svg)](http://47.104.67.236:9109/badge/nodejs_spider_faith/coverage.svg)

node_spider_faith是nodejs爬虫失败任务处理模块

### 安装
这是一个私有模块，该模块存放在`http://47.104.67.236:9109`上
    
    >npm install --save @nodejs/spider-faith
    
### 使用

    const failedTasksHandler = require('@nodejs/spider-faith');
    
    const config = {
        jobId   : ...,
        spiderKey: ..., // 建议和信源key保持一致
        parentId: ...,
    }
    
    const fth = failedTasksHandler.getInstance(config);
    
    fth.startJob(); // 任务开始时调用
    
    ... // 任务代码
    
    // 记录每个阶段失败的任务数据
    fth.saveTask('phase1@aaaa', {title: 'one'});
    fth.saveTask('phase1@aaaa', {title: 'two'});
    fth.saveTask('phase2@bbb', {title: 'line two'});
    
    fth.endJob(); // 任务结束时调用