/**
 * @author yangyufei
 * @date 2019-03-05 10:09:32
 * @desc
 */
const redisManager  = require('../../../lib/db_manager/redis_manager');
const helper        = require('../../helper');
const ip            = require('./getIp')();

describe('lib/db_manager/redis_manager', () => {
    it('整体测试', async () => {
        await helper(async () => {
            let logger = {};
            logger = {};
            ['trace', 'debug', 'info', 'warn', 'error', 'fatal'].forEach(level => {
                logger[level] = msgOrObj => {};
            });

            let config;

            if (process.env.SERVER_IP) {
                config = {host: process.env.SERVER_IP, port: 6379, password: 'CMCC10086'};
            } else {
                config = {host: '127.0.0.1', port: 6379, password: '19871102'};
            }

            let rm = redisManager(config, logger);

            await rm.close();
            return true;
        });
    });
});
